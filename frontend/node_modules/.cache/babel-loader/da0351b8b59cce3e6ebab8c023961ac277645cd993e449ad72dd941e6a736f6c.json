{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import API_URL from'../config/api';import'./PostCard.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const PostCard=_ref=>{let{post,currentUser,onPostDeleted,onLikeToggle,onCommentAdded,onComment,isConsumerView=false,consumerName=''}=_ref;const[commentText,setCommentText]=useState('');const[isLiked,setIsLiked]=useState(false);const[likesCount,setLikesCount]=useState(0);useEffect(()=>{if(isConsumerView&&consumerName){var _post$consumerLikes,_post$likes,_post$consumerLikes2;// Check consumer likes\nconst liked=((_post$consumerLikes=post.consumerLikes)===null||_post$consumerLikes===void 0?void 0:_post$consumerLikes.some(like=>like.consumerName===consumerName))||false;setIsLiked(liked);const userLikesCount=((_post$likes=post.likes)===null||_post$likes===void 0?void 0:_post$likes.length)||0;const consumerLikesCount=((_post$consumerLikes2=post.consumerLikes)===null||_post$consumerLikes2===void 0?void 0:_post$consumerLikes2.length)||0;setLikesCount(userLikesCount+consumerLikesCount);}else if(currentUser&&currentUser.id){var _post$likes2,_post$likes3,_post$consumerLikes3;// Check authenticated user likes\nconst liked=((_post$likes2=post.likes)===null||_post$likes2===void 0?void 0:_post$likes2.some(like=>{const likeId=typeof like==='object'&&like._id?like._id.toString():like.toString();return likeId===currentUser.id;}))||false;setIsLiked(liked);const userLikesCount=((_post$likes3=post.likes)===null||_post$likes3===void 0?void 0:_post$likes3.length)||0;const consumerLikesCount=((_post$consumerLikes3=post.consumerLikes)===null||_post$consumerLikes3===void 0?void 0:_post$consumerLikes3.length)||0;setLikesCount(userLikesCount+consumerLikesCount);}else{var _post$likes4,_post$consumerLikes4;setIsLiked(false);const userLikesCount=((_post$likes4=post.likes)===null||_post$likes4===void 0?void 0:_post$likes4.length)||0;const consumerLikesCount=((_post$consumerLikes4=post.consumerLikes)===null||_post$consumerLikes4===void 0?void 0:_post$consumerLikes4.length)||0;setLikesCount(userLikesCount+consumerLikesCount);}},[post.likes,post.consumerLikes,currentUser,consumerName,isConsumerView]);const handleLike=async()=>{// In consumer view, check if name is required\nif(isConsumerView&&!consumerName){return;// Don't allow like if no name\n}try{await onLikeToggle(post._id);setIsLiked(!isLiked);setLikesCount(isLiked?likesCount-1:likesCount+1);}catch(err){console.error('Failed to toggle like:',err);}};const handleComment=async e=>{e.preventDefault();if(!commentText.trim())return;// In consumer view, check if name is required\nif(isConsumerView&&!consumerName){return;// Don't allow comment if no name\n}if(isConsumerView&&onComment){// Consumer view - use onComment callback\nawait onComment(post._id,commentText);setCommentText('');}else{// Authenticated user\ntry{await axios.post(\"\".concat(API_URL,\"/comments\"),{postId:post._id,text:commentText});setCommentText('');onCommentAdded();}catch(err){console.error('Failed to add comment:',err);}}};const handleDelete=async()=>{if(!window.confirm('Are you sure you want to delete this post?'))return;try{await axios.delete(\"\".concat(API_URL,\"/posts/\").concat(post._id));onPostDeleted(post._id);}catch(err){console.error('Failed to delete post:',err);alert('Failed to delete post');}};const handleDeleteComment=async commentId=>{if(!window.confirm('Are you sure you want to delete this comment?'))return;try{if(isConsumerView&&consumerName){// Consumer view - use public delete route\nawait axios.delete(\"\".concat(API_URL,\"/comments/public/\").concat(commentId),{data:{consumerName:consumerName}});}else{// Authenticated user\nawait axios.delete(\"\".concat(API_URL,\"/comments/\").concat(commentId));}onCommentAdded();// Refresh comments\n}catch(err){var _err$response,_err$response$data;console.error('Failed to delete comment:',err);alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to delete comment');}};const isCreator=currentUser.role==='creator';// Debug: log post data to see what we're receiving\nuseEffect(()=>{console.log('Post data:',{id:post._id,title:post.title,location:post.location,caption:post.caption,people:post.people});},[post]);const mediaUrl=post.imageUrl?post.imageUrl.startsWith('http')?post.imageUrl:\"http://localhost:5000\".concat(post.imageUrl):null;const isVideo=post.mediaType==='video'||post.imageUrl&&/\\.(mp4|webm|ogg)$/i.test(post.imageUrl);return/*#__PURE__*/_jsxs(\"div\",{className:\"post-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post-creator\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[post.creator.name||post.creator.username,isCreator?' (Creator)':'']})}),isCreator&&/*#__PURE__*/_jsx(\"div\",{className:\"post-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:handleDelete,children:\"Delete\"})})]}),post.imageUrl&&(isVideo?/*#__PURE__*/_jsx(\"video\",{className:\"post-media post-video\",src:mediaUrl,controls:true}):/*#__PURE__*/_jsx(\"img\",{src:mediaUrl,alt:post.caption||'Post',className:\"post-media post-image\"})),/*#__PURE__*/_jsxs(\"div\",{className:\"post-content\",children:[post.title&&post.title.trim()?/*#__PURE__*/_jsx(\"div\",{className:\"post-title\",children:/*#__PURE__*/_jsx(\"h3\",{children:post.title})}):null,/*#__PURE__*/_jsx(\"div\",{className:\"post-actions-bar\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"like-btn \".concat(isLiked?'liked':''),onClick:handleLike,disabled:isConsumerView&&!consumerName,title:isConsumerView&&!consumerName?'Please login to interact':'',children:[isLiked?'‚ù§Ô∏è':'ü§ç',\" \",likesCount]})}),post.caption&&post.caption.trim()?/*#__PURE__*/_jsx(\"div\",{className:\"post-caption\",children:post.caption}):null,post.location&&post.location.trim()||post.people&&post.people.trim()?/*#__PURE__*/_jsxs(\"div\",{className:\"post-metadata\",children:[post.location&&post.location.trim()&&/*#__PURE__*/_jsxs(\"span\",{className:\"metadata-item\",children:[\"\\uD83D\\uDCCD \",post.location]}),post.people&&post.people.trim()&&/*#__PURE__*/_jsxs(\"div\",{className:\"metadata-item people-display\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"people-label\",children:\"\\uD83D\\uDC65\"}),/*#__PURE__*/_jsx(\"div\",{className:\"people-chips\",children:post.people.split(',').map((name,index)=>{const trimmedName=name.trim();return trimmedName?/*#__PURE__*/_jsx(\"span\",{className:\"people-chip-display\",children:trimmedName},index):null;})})]})]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"post-comments\",children:[post.comments&&post.comments.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"comments-list\",children:post.comments.map(comment=>{let commentAuthor='Unknown';if(comment.user){// Check if creator - use currentUser to check role if comment.user doesn't have it\nconst isCommentCreator=comment.user.role==='creator'||currentUser&&currentUser.role==='creator'&&comment.user._id===currentUser.id;const displayName=comment.user.name||comment.user.username;// For creator comments, always show \"Name (Creator)\" format\ncommentAuthor=isCommentCreator?\"\".concat(displayName,\" (Creator)\"):displayName;}else if(comment.consumerName){commentAuthor=comment.consumerName;}// Creator can only delete their own comments (not consumer comments)\n// Consumer can only delete their own comments\nlet canDelete=false;if(isCreator){// Creator can only delete comments made by authenticated users (themselves)\ncanDelete=comment.user&&(comment.user._id===currentUser.id||comment.user===currentUser.id);}else if(isConsumerView){// Consumer can only delete their own comments\ncanDelete=comment.consumerName===consumerName;}else{// Authenticated consumer can delete their own comments\ncanDelete=comment.user&&(comment.user._id===currentUser.id||comment.user===currentUser.id);}return/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:commentAuthor}),\" \",comment.text]}),canDelete&&/*#__PURE__*/_jsx(\"button\",{className:\"delete-comment-btn\",onClick:()=>handleDeleteComment(comment._id),title:\"Delete comment\",children:\"\\xD7\"})]},comment._id);})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleComment,className:\"comment-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:isConsumerView&&!consumerName?\"Login to interact to comment...\":\"Add a comment...\",value:commentText,onChange:e=>setCommentText(e.target.value),className:\"comment-input\",disabled:isConsumerView&&!consumerName}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"comment-btn\",disabled:isConsumerView&&!consumerName,children:\"Post\"})]})]})]})]});};export default PostCard;","map":{"version":3,"names":["React","useState","useEffect","axios","API_URL","jsxs","_jsxs","jsx","_jsx","PostCard","_ref","post","currentUser","onPostDeleted","onLikeToggle","onCommentAdded","onComment","isConsumerView","consumerName","commentText","setCommentText","isLiked","setIsLiked","likesCount","setLikesCount","_post$consumerLikes","_post$likes","_post$consumerLikes2","liked","consumerLikes","some","like","userLikesCount","likes","length","consumerLikesCount","id","_post$likes2","_post$likes3","_post$consumerLikes3","likeId","_id","toString","_post$likes4","_post$consumerLikes4","handleLike","err","console","error","handleComment","e","preventDefault","trim","concat","postId","text","handleDelete","window","confirm","delete","alert","handleDeleteComment","commentId","data","_err$response","_err$response$data","response","message","isCreator","role","log","title","location","caption","people","mediaUrl","imageUrl","startsWith","isVideo","mediaType","test","className","children","creator","name","username","onClick","src","controls","alt","disabled","split","map","index","trimmedName","comments","comment","commentAuthor","user","isCommentCreator","displayName","canDelete","onSubmit","type","placeholder","value","onChange","target"],"sources":["C:/Users/Omer/mini-instagram-app/frontend/src/components/PostCard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport API_URL from '../config/api';\r\nimport './PostCard.css';\r\n\r\nconst PostCard = ({ post, currentUser, onPostDeleted, onLikeToggle, onCommentAdded, onComment, isConsumerView = false, consumerName = '' }) => {\r\n  const [commentText, setCommentText] = useState('');\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [likesCount, setLikesCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (isConsumerView && consumerName) {\r\n      // Check consumer likes\r\n      const liked = post.consumerLikes?.some(like => \r\n        like.consumerName === consumerName\r\n      ) || false;\r\n      setIsLiked(liked);\r\n      const userLikesCount = post.likes?.length || 0;\r\n      const consumerLikesCount = post.consumerLikes?.length || 0;\r\n      setLikesCount(userLikesCount + consumerLikesCount);\r\n    } else if (currentUser && currentUser.id) {\r\n      // Check authenticated user likes\r\n      const liked = post.likes?.some(like => {\r\n        const likeId = typeof like === 'object' && like._id ? like._id.toString() : like.toString();\r\n        return likeId === currentUser.id;\r\n      }) || false;\r\n      setIsLiked(liked);\r\n      const userLikesCount = post.likes?.length || 0;\r\n      const consumerLikesCount = post.consumerLikes?.length || 0;\r\n      setLikesCount(userLikesCount + consumerLikesCount);\r\n    } else {\r\n      setIsLiked(false);\r\n      const userLikesCount = post.likes?.length || 0;\r\n      const consumerLikesCount = post.consumerLikes?.length || 0;\r\n      setLikesCount(userLikesCount + consumerLikesCount);\r\n    }\r\n  }, [post.likes, post.consumerLikes, currentUser, consumerName, isConsumerView]);\r\n\r\n  const handleLike = async () => {\r\n    // In consumer view, check if name is required\r\n    if (isConsumerView && !consumerName) {\r\n      return; // Don't allow like if no name\r\n    }\r\n    try {\r\n      await onLikeToggle(post._id);\r\n      setIsLiked(!isLiked);\r\n      setLikesCount(isLiked ? likesCount - 1 : likesCount + 1);\r\n    } catch (err) {\r\n      console.error('Failed to toggle like:', err);\r\n    }\r\n  };\r\n\r\n  const handleComment = async (e) => {\r\n    e.preventDefault();\r\n    if (!commentText.trim()) return;\r\n\r\n    // In consumer view, check if name is required\r\n    if (isConsumerView && !consumerName) {\r\n      return; // Don't allow comment if no name\r\n    }\r\n\r\n    if (isConsumerView && onComment) {\r\n      // Consumer view - use onComment callback\r\n      await onComment(post._id, commentText);\r\n      setCommentText('');\r\n    } else {\r\n      // Authenticated user\r\n      try {\r\n        await axios.post(`${API_URL}/comments`, {\r\n          postId: post._id,\r\n          text: commentText\r\n        });\r\n        setCommentText('');\r\n        onCommentAdded();\r\n      } catch (err) {\r\n        console.error('Failed to add comment:', err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!window.confirm('Are you sure you want to delete this post?')) return;\r\n\r\n    try {\r\n      await axios.delete(`${API_URL}/posts/${post._id}`);\r\n      onPostDeleted(post._id);\r\n    } catch (err) {\r\n      console.error('Failed to delete post:', err);\r\n      alert('Failed to delete post');\r\n    }\r\n  };\r\n\r\n  const handleDeleteComment = async (commentId) => {\r\n    if (!window.confirm('Are you sure you want to delete this comment?')) return;\r\n\r\n    try {\r\n      if (isConsumerView && consumerName) {\r\n        // Consumer view - use public delete route\r\n        await axios.delete(`${API_URL}/comments/public/${commentId}`, {\r\n          data: { consumerName: consumerName }\r\n        });\r\n      } else {\r\n        // Authenticated user\r\n        await axios.delete(`${API_URL}/comments/${commentId}`);\r\n      }\r\n      onCommentAdded(); // Refresh comments\r\n    } catch (err) {\r\n      console.error('Failed to delete comment:', err);\r\n      alert(err.response?.data?.message || 'Failed to delete comment');\r\n    }\r\n  };\r\n\r\n  const isCreator = currentUser.role === 'creator';\r\n\r\n  // Debug: log post data to see what we're receiving\r\n  useEffect(() => {\r\n    console.log('Post data:', {\r\n      id: post._id,\r\n      title: post.title,\r\n      location: post.location,\r\n      caption: post.caption,\r\n      people: post.people\r\n    });\r\n  }, [post]);\r\n\r\n  const mediaUrl = post.imageUrl\r\n    ? (post.imageUrl.startsWith('http')\r\n        ? post.imageUrl\r\n        : `http://localhost:5000${post.imageUrl}`)\r\n    : null;\r\n\r\n  const isVideo =\r\n    post.mediaType === 'video' ||\r\n    (post.imageUrl &&\r\n      /\\.(mp4|webm|ogg)$/i.test(post.imageUrl));\r\n\r\n  return (\r\n    <div className=\"post-card\">\r\n      <div className=\"post-header\">\r\n        <div className=\"post-creator\">\r\n          <strong>{post.creator.name || post.creator.username}{isCreator ? ' (Creator)' : ''}</strong>\r\n        </div>\r\n        {isCreator && (\r\n          <div className=\"post-actions\">\r\n            <button className=\"delete-btn\" onClick={handleDelete}>\r\n              Delete\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {post.imageUrl && (\r\n        isVideo ? (\r\n          <video\r\n            className=\"post-media post-video\"\r\n            src={mediaUrl}\r\n            controls\r\n          />\r\n        ) : (\r\n          <img\r\n            src={mediaUrl}\r\n            alt={post.caption || 'Post'}\r\n            className=\"post-media post-image\"\r\n          />\r\n        )\r\n      )}\r\n\r\n      <div className=\"post-content\">\r\n        {post.title && post.title.trim() ? (\r\n          <div className=\"post-title\">\r\n            <h3>{post.title}</h3>\r\n          </div>\r\n        ) : null}\r\n\r\n        <div className=\"post-actions-bar\">\r\n          <button\r\n            className={`like-btn ${isLiked ? 'liked' : ''}`}\r\n            onClick={handleLike}\r\n            disabled={isConsumerView && !consumerName}\r\n            title={isConsumerView && !consumerName ? 'Please login to interact' : ''}\r\n          >\r\n            {isLiked ? '‚ù§Ô∏è' : 'ü§ç'} {likesCount}\r\n          </button>\r\n        </div>\r\n\r\n        {post.caption && post.caption.trim() ? (\r\n          <div className=\"post-caption\">\r\n            {post.caption}\r\n          </div>\r\n        ) : null}\r\n\r\n        {(post.location && post.location.trim()) || (post.people && post.people.trim()) ? (\r\n          <div className=\"post-metadata\">\r\n            {post.location && post.location.trim() && (\r\n              <span className=\"metadata-item\">üìç {post.location}</span>\r\n            )}\r\n            {post.people && post.people.trim() && (\r\n              <div className=\"metadata-item people-display\">\r\n                <span className=\"people-label\">üë•</span>\r\n                <div className=\"people-chips\">\r\n                  {post.people.split(',').map((name, index) => {\r\n                    const trimmedName = name.trim();\r\n                    return trimmedName ? (\r\n                      <span key={index} className=\"people-chip-display\">\r\n                        {trimmedName}\r\n                      </span>\r\n                    ) : null;\r\n                  })}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : null}\r\n\r\n        <div className=\"post-comments\">\r\n          {post.comments && post.comments.length > 0 && (\r\n            <div className=\"comments-list\">\r\n              {post.comments.map(comment => {\r\n                let commentAuthor = 'Unknown';\r\n                if (comment.user) {\r\n                  // Check if creator - use currentUser to check role if comment.user doesn't have it\r\n                  const isCommentCreator = comment.user.role === 'creator' || \r\n                    (currentUser && currentUser.role === 'creator' && comment.user._id === currentUser.id);\r\n                  const displayName = comment.user.name || comment.user.username;\r\n                  // For creator comments, always show \"Name (Creator)\" format\r\n                  commentAuthor = isCommentCreator ? `${displayName} (Creator)` : displayName;\r\n                } else if (comment.consumerName) {\r\n                  commentAuthor = comment.consumerName;\r\n                }\r\n                // Creator can only delete their own comments (not consumer comments)\r\n                // Consumer can only delete their own comments\r\n                let canDelete = false;\r\n                if (isCreator) {\r\n                  // Creator can only delete comments made by authenticated users (themselves)\r\n                  canDelete = comment.user && (comment.user._id === currentUser.id || comment.user === currentUser.id);\r\n                } else if (isConsumerView) {\r\n                  // Consumer can only delete their own comments\r\n                  canDelete = comment.consumerName === consumerName;\r\n                } else {\r\n                  // Authenticated consumer can delete their own comments\r\n                  canDelete = comment.user && (comment.user._id === currentUser.id || comment.user === currentUser.id);\r\n                }\r\n                return (\r\n                  <div key={comment._id} className=\"comment\">\r\n                    <div className=\"comment-content\">\r\n                      <strong>{commentAuthor}</strong> {comment.text}\r\n                    </div>\r\n                    {canDelete && (\r\n                      <button\r\n                        className=\"delete-comment-btn\"\r\n                        onClick={() => handleDeleteComment(comment._id)}\r\n                        title=\"Delete comment\"\r\n                      >\r\n                        √ó\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleComment} className=\"comment-form\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder={isConsumerView && !consumerName ? \"Login to interact to comment...\" : \"Add a comment...\"}\r\n              value={commentText}\r\n              onChange={(e) => setCommentText(e.target.value)}\r\n              className=\"comment-input\"\r\n              disabled={isConsumerView && !consumerName}\r\n            />\r\n            <button type=\"submit\" className=\"comment-btn\" disabled={isConsumerView && !consumerName}>\r\n              Post\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}