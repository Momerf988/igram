{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Omer\\\\mini-instagram-app\\\\frontend\\\\src\\\\pages\\\\ConsumerView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport PostCard from '../components/PostCard';\nimport './ConsumerView.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:5000/api';\nconst ConsumerView = () => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [locationFilter, setLocationFilter] = useState('');\n  const [personFilter, setPersonFilter] = useState('');\n  useEffect(() => {\n    fetchPosts();\n  }, [searchTerm, locationFilter, personFilter]);\n  const fetchPosts = async () => {\n    try {\n      const params = {};\n      if (searchTerm) params.search = searchTerm;\n      if (locationFilter) params.location = locationFilter;\n      if (personFilter) params.person = personFilter;\n      const response = await axios.get(`${API_URL}/posts`, {\n        params\n      });\n      setPosts(response.data);\n    } catch (err) {\n      console.error('Failed to load posts:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleLikeToggle = async postId => {\n    try {\n      // For consumers, use localStorage to track likes (anonymous)\n      const likedPosts = JSON.parse(localStorage.getItem('likedPosts') || '[]');\n      const isLiked = likedPosts.includes(postId);\n      if (isLiked) {\n        const newLikedPosts = likedPosts.filter(id => id !== postId);\n        localStorage.setItem('likedPosts', JSON.stringify(newLikedPosts));\n      } else {\n        const newLikedPosts = [...likedPosts, postId];\n        localStorage.setItem('likedPosts', JSON.stringify(newLikedPosts));\n      }\n\n      // Refresh posts to update UI\n      fetchPosts();\n    } catch (err) {\n      console.error('Failed to toggle like:', err);\n    }\n  };\n  const handleCommentAdded = () => {\n    fetchPosts();\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading posts...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"consumer-view\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"consumer-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Media Distribution Platform\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-filters\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search by title or caption...\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value),\n          className: \"search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Filter by location...\",\n          value: locationFilter,\n          onChange: e => setLocationFilter(e.target.value),\n          className: \"filter-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Filter by person...\",\n          value: personFilter,\n          onChange: e => setPersonFilter(e.target.value),\n          className: \"filter-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/creator/login\",\n        className: \"creator-login-link\",\n        children: \"Creator Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"posts-container\",\n      children: posts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-posts\",\n        children: \"No posts found. Try adjusting your search filters.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this) : posts.map(post => /*#__PURE__*/_jsxDEV(PostCard, {\n        post: post,\n        currentUser: {\n          role: 'consumer',\n          id: null\n        },\n        onPostUpdated: () => {},\n        onPostDeleted: () => {},\n        onLikeToggle: handleLikeToggle,\n        onCommentAdded: handleCommentAdded,\n        isConsumerView: true\n      }, post._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(ConsumerView, \"DaVuK09cjqaH8ZGelgejiRHwtyU=\");\n_c = ConsumerView;\nexport default ConsumerView;\nvar _c;\n$RefreshReg$(_c, \"ConsumerView\");","map":{"version":3,"names":["React","useState","useEffect","axios","PostCard","jsxDEV","_jsxDEV","API_URL","ConsumerView","_s","posts","setPosts","loading","setLoading","searchTerm","setSearchTerm","locationFilter","setLocationFilter","personFilter","setPersonFilter","fetchPosts","params","search","location","person","response","get","data","err","console","error","handleLikeToggle","postId","likedPosts","JSON","parse","localStorage","getItem","isLiked","includes","newLikedPosts","filter","id","setItem","stringify","handleCommentAdded","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","href","length","map","post","currentUser","role","onPostUpdated","onPostDeleted","onLikeToggle","onCommentAdded","isConsumerView","_id","_c","$RefreshReg$"],"sources":["C:/Users/Omer/mini-instagram-app/frontend/src/pages/ConsumerView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport PostCard from '../components/PostCard';\r\nimport './ConsumerView.css';\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\nconst ConsumerView = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [locationFilter, setLocationFilter] = useState('');\r\n  const [personFilter, setPersonFilter] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchPosts();\r\n  }, [searchTerm, locationFilter, personFilter]);\r\n\r\n  const fetchPosts = async () => {\r\n    try {\r\n      const params = {};\r\n      if (searchTerm) params.search = searchTerm;\r\n      if (locationFilter) params.location = locationFilter;\r\n      if (personFilter) params.person = personFilter;\r\n\r\n      const response = await axios.get(`${API_URL}/posts`, { params });\r\n      setPosts(response.data);\r\n    } catch (err) {\r\n      console.error('Failed to load posts:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLikeToggle = async (postId) => {\r\n    try {\r\n      // For consumers, use localStorage to track likes (anonymous)\r\n      const likedPosts = JSON.parse(localStorage.getItem('likedPosts') || '[]');\r\n      const isLiked = likedPosts.includes(postId);\r\n      \r\n      if (isLiked) {\r\n        const newLikedPosts = likedPosts.filter(id => id !== postId);\r\n        localStorage.setItem('likedPosts', JSON.stringify(newLikedPosts));\r\n      } else {\r\n        const newLikedPosts = [...likedPosts, postId];\r\n        localStorage.setItem('likedPosts', JSON.stringify(newLikedPosts));\r\n      }\r\n      \r\n      // Refresh posts to update UI\r\n      fetchPosts();\r\n    } catch (err) {\r\n      console.error('Failed to toggle like:', err);\r\n    }\r\n  };\r\n\r\n  const handleCommentAdded = () => {\r\n    fetchPosts();\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading posts...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"consumer-view\">\r\n      <header className=\"consumer-header\">\r\n        <h1>Media Distribution Platform</h1>\r\n        <div className=\"search-filters\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search by title or caption...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"search-input\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Filter by location...\"\r\n            value={locationFilter}\r\n            onChange={(e) => setLocationFilter(e.target.value)}\r\n            className=\"filter-input\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Filter by person...\"\r\n            value={personFilter}\r\n            onChange={(e) => setPersonFilter(e.target.value)}\r\n            className=\"filter-input\"\r\n          />\r\n        </div>\r\n        <a href=\"/creator/login\" className=\"creator-login-link\">Creator Login</a>\r\n      </header>\r\n\r\n      <div className=\"posts-container\">\r\n        {posts.length === 0 ? (\r\n          <div className=\"no-posts\">No posts found. Try adjusting your search filters.</div>\r\n        ) : (\r\n          posts.map(post => (\r\n            <PostCard\r\n              key={post._id}\r\n              post={post}\r\n              currentUser={{ role: 'consumer', id: null }}\r\n              onPostUpdated={() => {}}\r\n              onPostDeleted={() => {}}\r\n              onLikeToggle={handleLikeToggle}\r\n              onCommentAdded={handleCommentAdded}\r\n              isConsumerView={true}\r\n            />\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConsumerView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}